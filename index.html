<!DOCTYPE html>
<html lang="z-Hans">
<head>
    <meta charset="UTF-8">
    <title>王婷の简历</title>
    <link rel="stylesheet" href="./main.css">
    <script src="//at.alicdn.com/t/font_455247_6x12y3ymna9bpgb9.js">
    </script>
    <style type="text/css">
    /* .loading{width:200px;height:200px;position:relative;}
    .loading::before,.loading::after{content:'';width:0px;height:0px;background:black;border-radius:50%;
    position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;animation:2s linear infinite c;}
    .loading::after{animation-delay:1s;}
    @keyframes c{0%{width:0;height:0;opacity:1;}100%{width:100px;height:100px;opacity:0;}} */
    .icon {width: 1em; height: 1em;vertical-align: -0.15em;fill: currentColor;overflow: hidden;}
    /* .site-welcome{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background: gray;
    z-index: 1;justify-content: center;align-items: center;}
    .site-welcome.active{display: flex;} */
  </style>
</head>
<body>
  <!-- <div id="siteWelcome" class="site-welcome active">
    <div class="loading"></div>
  </div> -->
  <div id="sideNavBar" class="topNavBar">
    <div class="topNavBarInner clearfix">
        <a class="logo" href="#" alt="logo" style="float:left">
            <span class="rs">RS</span><span class="card">card</span>
          </a>
        <nav class="menu" style="float:right">
          <ul class="clearfix">
            <li><a href="#sideAbout">关于</a></li>
            <li><a href="#sideSkill">技能</a></li>        
            <li>
              <a  href="#sideWork">作品</a>
              <ul class="submenu">
              <li>作品1</li>
              <li>作品2</li>
              <li>作品3</li>
            </ul>
            </li>
            <li>
              <a  href="#">博客</a>
            <ul class="submenu">
              <li>博客1</li>
              <li>博客2</li>
            </ul>
            </li>
            <li><a href="#">联系方式</a></li>
            <li><a href="#">其他</a></li>
          </ul>
        </nav>
    </div>
  </div>
    
<div class="banner">
  <div class="mask"></div>
</div>
<main>
  <div data-x id="sideAbout" class="userCard"> <!--加上data-x的属性 方便调取 -->
    <div class="pictureAndText clearfix">
      <div class="picture">  
          <img src="./img/WP.jpg" alt="头像">    
      </div>
      <div class="text">
          <span class="welcome">
            HELLO
          <span class="triangle"></span>
          </span>
          <h1>王小逗</h1>
          <p>前端工程师</p>
          <hr>
          <dl class="clearfix">
            <dt>年龄</dt>
            <dd>25</dd>
            <dt>地址</dt>
            <dd>重庆</dd>
            <dt>邮箱</dt>
            <dd>88555222</dd>
            <dt>电话</dt>
            <dd>1234567899</dd>
          </dl>
        </div>
      </div> 
          <footer class="media">
            <a href="#1">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-github"></use>
              </svg>
            </a>
            <a href="#2">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-hexo"></use>
              </svg>
            </a>
            <a href="#3">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-weibo"></use>
              </svg>
          </a>
            <a href="#4">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-shuyuanjianjie"></use>
              </svg>
          </a>
          </footer>
  </div>
      <a class="downloadResume" href="#" target="_blank" download><span class="xiazai">简历下载</span></a>
      <p>Experienced with all stages of the development cycle for dynamic web projects.</p>
    </main>
<section data-x id="sideSkill" class="skills">
  <h2>技能</h2>
  <ol class="clearfix">
    <li>
      <h3>
        HTML5 &amp; CSS3
      </h3>
      <div class="progressBar">
        <div class="progress" style="width: 70%;"></div>
      </div>
    </li>
    <li>
        <h3>
            JavaScript
          </h3>
          <div class="progressBar">
            <div class="progress" style="width: 50%;"></div>
          </div>
    </li>
    <li>
        <h3>
            jQuery
          </h3>
          <div class="progressBar">
            <div class="progress" style="width: 90%;"></div>
          </div>
    </li>
    <li>
        <h3>
            Vue
          </h3>
          <div class="progressBar">
            <div class="progress" style="width: 80%;"></div>
          </div>
    </li>
    <li>
        <h3>
            React
          </h3>
          <div class="progressBar">
            <div class="progress" style="width: 60%;"></div>
          </div>
    </li>
    <li>
        <h3>
            HTTP
          </h3>
          <div class="progressBar">
            <div class="progress" style="width: 50%;"></div>
          </div>
    </li>
  </ol>
</section>
<section data-x id="sideWork" class="portfolio">
  <h2>作品</h2>
  <nav class="clearfix">
    <ul>
      <label><li id="portfolio1">所有</li></label>
      <li id="portfolio2">框架</li>
      <li id="portfolio3">原生JS&amp;CSS</li>
    </ul>
    <div id="portfolioBar" class="bar stage1"><!--id与-->
      <div class="innerbar"></div>
    </div>
    <script>
      portfolio1.onclick=function(){
        portfolioBar.className="bar stage1"
      }
      portfolio2.onclick=function(){
        portfolioBar.className="bar stage2"
      }
      portfolio3.onclick=function(){
        portfolioBar.className="bar stage3"
      }
    </script>
  </nav>
  <div class="works">
    <div class="big">
      <img src="./img/p1.jpg" alt="作品1">
    </div>    
    <div class="small1">
      <img src="./img/p2.jpg" alt="作品2">
    </div>
    <div class="small2">
      <img src="./img/p3.jpg" alt="作品3">
    </div>    
  </div>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.1.1/Tween.min.js"></script>
<script>
  // siteWelcome.classList.remove('active')   //运行到这里说明前面都加载完了 这时把loading去掉就可以了 
  
  let specialTags = document.querySelectorAll('[data-x]')//取出含有这个属性的元素
  for(let i=0; i<specialTags.length; i++){
    specialTags[i].classList.add('offset') //让每个部分都是从下向上飘出来的
  }
  findClosest() 
  
  window.onscroll = function(){
    if(window.scrollY > 0){    
      sideNavBar.classList.add('nian')
    }else{
      sideNavBar.classList.remove('nian')      
    }
   findClosest()
  }
  function findClosest(){
  //下面这一堆是在滚动时发生的 所以要放在滚动事件里
  let specialTags = document.querySelectorAll('[data-x]')//取出含有这个属性的元素
      let minIndex = 0 //假设最小的是0，下面从1开始遍历比较
      for(let i=1; i<specialTags.length; i++){
        if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY)){
        minIndex = i
        }      
      }
      specialTags[minIndex].classList.remove('offset')
      let id = specialTags[minIndex].id    
      let a = document.querySelector('a[href="#'+ id +'"]') //a[href="#sideAbout"]
      let li = a.parentNode   
      let brotherAndMe = li.parentNode.children
      for(let i=0; i<brotherAndMe.length; i++){
        brotherAndMe[i].classList.remove('highlight')
      }
        li.classList.add('highlight')    
  }

  let liTags = document.querySelectorAll('nav.menu > ul > li')//直接寻找nav下的li元素
  for(let i=0; i<liTags.length; i++){
    liTags[i].onmouseenter = function(x){
      x.currentTarget.classList.add('active')    //移进li标签就加上active样式  
    }
    liTags[i].onmouseleave = function(x){
      x.currentTarget.classList.remove('active')            
    }    
  }
    
    
  let aTags = document.querySelectorAll('nav.menu > ul >li >a')
  function animate(time) {
    requestAnimationFrame(animate);
    TWEEN.update(time);
  }
  requestAnimationFrame(animate);//这一部分是tween.js的
  for(let i=0;i<aTags.length; i++){
    aTags[i].onclick = function(x){
      x.preventDefault()
      let a = x.currentTarget
      let href = a.getAttribute('href') // #sideAbout
      let element = document.querySelector(href) //取出选择器名为href的元素
      let top = element.offsetTop//完整页面上 每个元素到页面顶部的高度
      //下面这段是从tween.js里抄来的
      var currentTop = window.scrollY
      var targetTop = top - 90
      var s = targetTop - currentTop
      var t = Math.abs((s/100)*300) //距离越长 时间越长 取绝对值
      if(t>=500){t = 500}
      var coords = { y:currentTop }; 
      var tween = new TWEEN.Tween(coords) 
        .to({y: targetTop }, t) 
        .easing(TWEEN.Easing.Quadratic.InOut) 
        .onUpdate(function() { 
          window.scrollTo(0,coords.y)
        })
        .start(); 
  }
  }
</script>
</body>
</html>